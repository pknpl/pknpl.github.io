<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PKNPL</title>
  <!-- Google Font for Marathi -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhai+2:wght@400;600&display=swap" rel="stylesheet">
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <style>
    body {
      margin: 0;
      font-family: 'Baloo Bhai 2', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      background: #f0f4f8;
      color: #333;
      padding: 1rem;
      text-align: center;
    }
    img.logo { max-width: 180px; margin: 1.5rem auto; animation: fadeInDown 0.8s; }
    .message { font-size: 1.1rem; line-height: 1.5; margin-bottom: 1.5rem; animation: fadeIn 0.8s ease-out; border: 2px solid #2a7de1; background: #e6f0fa; padding: 1rem; border-radius: 8px; }
    .privacy-note { font-size: 0.9rem; color: #666; margin-top: 2rem; max-width: 90%; }
    #success-msg, #error-msg { display: none; margin-top: 1.5rem; animation: fadeIn 0.8s; font-size: 1rem; }
    #success-msg { color: #2a7de1; font-weight: 600; }
    #error-msg { color: #d9534f; font-weight: 600; }
    button { padding: 1rem 2rem; font-size: 1.1rem; font-weight: 600; border: none; border-radius: 8px; background: #2a7de1; color: #fff; cursor: pointer; animation: pulse 2s infinite; }
    button:hover { background: #246bc1; }
    .loader { display: none; margin-top: 1rem; width: 40px; height: 40px; border: 5px solid #ccc; border-top-color: #2a7de1; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes pulse { 0%,100%{transform:scale(1);}50%{transform:scale(1.05);} }
    @keyframes fadeIn { from{opacity:0;}to{opacity:1;} }
    @keyframes fadeInDown { from{opacity:0; transform: translateY(-20px);} to{opacity:1; transform: translateY(0);} }
    @media (max-width: 600px) { .message { font-size: 1rem; } button { width: 100%; } }
  </style>
</head>
<body>
  <!-- Logo -->
  <img src="/resources/logo.jpg" alt="PKNPL Logo" class="logo">

  <!-- Instruction Message -->
   <div style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">
    ALC Information Survey
  </div>
   <div class="message">
    ЁЯУМ рдХреГрдкрдпрд╛ рд╣рд╛ рдлреЙрд░реНрдо рдЖрдкрд▓реНрдпрд╛ рдХреЗрдВрджреНрд░рд╛рд╡рд░ рдЙрдкрд╕реНрдерд┐рдд рдЕрд╕рддрд╛рдирд╛рдЪ рднрд░рд╛.
    рдЬрд░ рддреБрдореНрд╣реА рдХреЗрдВрджреНрд░рд╛рд╡рд░ рдирд╕рд╛рд▓, рддрд░ рдХреЗрдВрджреНрд░рд╛рд╡рд░ рдкреЛрд╣реЛрдЪрд▓реНрдпрд╛рдирдВрддрд░рдЪ рднрд░рд╛.<br>
  </div>
  <div class="message">
    ЁЯУН рддреБрдордЪреНрдпрд╛ рдбрд┐рд╡рд╛рдЗрд╕рдЪреЗ рд▓реЛрдХреЗрд╢рди рдСрди рдЕрд╕рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ. рдирд╕реЗрд▓ рддрд░ рдХреГрдкрдпрд╛ рдЖрддреНрддрд╛ рддреЗ рдСрди рдХрд░рд╛ рдЖрдгрд┐ рдХрд╛рд▓рдЪреНрдпрд╛ рдмрдЯрди рд╡рд░ рдХреНрд▓рд┐рдХ рдХрд░рд╛ .
  </div>

  <!-- Action Button -->
  <button id="loc-btn" onclick="getLocation()">рдЖрдкрд▓реЗ рд╕реНрдерд╛рди рд╢реЗрдЕрд░ рдХрд░рд╛ рдЖрдгрд┐ рдлреЙрд░реНрдо рднрд░рд╛</button>
  <div id="loader" class="loader"></div>

  <!-- Success & Error -->
  <div id="success-msg">тЬЕ рдЖрдкрд▓реЗ рд╕реНрдерд╛рди рдиреЛрдВрджрд▓реЗ рдЧреЗрд▓реЗ рдЖрд╣реЗ! рдлреЙрд░реНрдо рдУрдкрди рд╣реЛрдд рдЖрд╣реЗ.</div>
  <div id="error-msg">тЭМ рд▓реЛрдХреЗрд╢рди рдорд┐рд│рд╡рддрд╛ рдЖрд▓реЗ рдирд╛рд╣реА. рджреБрд╕рд▒реНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рдордзреНрдпреЗ рдкреНрд░рдпрддреНрди рдХрд░рд╛ рдХрд┐рдВрд╡рд╛ WhatsApp рд╡рд░ рд╕рдВрдкрд░реНрдХ рдХрд░рд╛: +91┬а9820313212,┬а+91┬а7738146959,┬а+91┬а8384858685</div>

  <!-- Privacy Note -->
  <p class="privacy-note">рд▓реЛрдХреЗрд╢рди рдлрдХреНрдд рдХреЗрдВрджреНрд░ рдУрд│рдЦрдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдИрд▓.</p>

  <script>
    let attempts = 0;
    function getLocation() {
      const btn = document.getElementById('loc-btn');
      const loader = document.getElementById('loader');
      btn.style.display = 'none'; document.getElementById('error-msg').style.display = 'none'; document.getElementById('success-msg').style.display = 'none'; loader.style.display = 'block';

      if (!navigator.onLine) return showError('рдЗрдВрдЯрд░рдиреЗрдЯ рдирд╛рд╣реА. рдХреГрдкрдпрд╛ рдХрдиреЗрдХреНрд╢рди рддрдкрд╛рд╕рд╛.');
      if (!navigator.geolocation) return showError('рдпрд╛ рдмреНрд░рд╛рдЙрдЭрд░рдордзреНрдпреЗ рд╕реНрдерд╛рди рд╕рдорд░реНрдерди рдирд╛рд╣реА.');

      navigator.geolocation.getCurrentPosition(onSuccess, onError, { enableHighAccuracy: true, timeout: 10000 });
    }

    function onSuccess(position) {
      document.getElementById('loader').style.display = 'none';
      document.getElementById('success-msg').style.display = 'block';
      setTimeout(() => {
        const lat = position.coords.latitude.toFixed(6);
        const lon = position.coords.longitude.toFixed(6);
        const baseForm = 'https://docs.google.com/forms/d/e/1FAIpQLScVMxTWTgLyTqw8hdBlCp_sgSRq27shc0-6rrhSVBIZd6Onlg';
        window.location.href = `${baseForm}/viewform?usp=pp_url&entry.988112384=${lat}&entry.1934476700=${lon}`;
      }, 1000);
    }

    function onError(err) {
      attempts++;
      let msg;
      switch(err.code) {
        case err.PERMISSION_DENIED:
          msg = 'тЭЧ рддреБрдордЪреЗ рд▓реЛрдХреЗрд╢рди рдорд┐рд│рд╡рддрд╛ рдЖрд▓реЗ рдирд╛рд╣реА. рдХреГрдкрдпрд╛ рдмреНрд░рд╛рдКрдЬрд░ рд╡ рд▓реЛрдХреЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рдЪреЗрдХ рдХрд░рд╛ рдЖрдгрд┐ рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рдХрд░рд╛.'; break;
        case err.POSITION_UNAVAILABLE:
          msg = 'рд╕реНрдерд╛рди рдорд╛рд╣рд┐рддреА рд╕рдзреНрдпрд╛ рдЙрдкрд▓рдмреНрдз рдирд╛рд╣реА. рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рдХрд░рд╛.'; break;
        case err.TIMEOUT:
          msg = 'рд╕реНрдерд╛рди рдорд┐рд│рдгреНрдпрд╛рд╕рд╛рдареА рдЬрд╛рд╕реНрдд рд╡реЗрд│ рд▓рд╛рдЧрд▓рд╛. рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рдХрд░рд╛.'; break;
        default:
          msg = 'рд╕реНрдерд╛рди рдорд┐рд│рд╡рддрд╛ рдЖрд▓реЗ рдирд╛рд╣реА. рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рдХрд░рд╛.';
      }
      if (attempts < 3) {
        alert(msg);
        document.getElementById('loader').style.display = 'none';
        document.getElementById('loc-btn').style.display = 'block';
      } else {
        showError();
      }
    }

    function showError(customMsg) {
      document.getElementById('loader').style.display = 'none';
      const errBox = document.getElementById('error-msg');
      errBox.style.display = 'block';
      if (customMsg) errBox.textContent = customMsg;
    }
  </script>
</body>
</html>
